<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" >
 <head>
     <title>Untitled Page</title>
     <link href="../static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
     <link href="../static/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" />
      <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script type="text/javascript">
     jQuery(document).ready(function(){
    	 /*
        $.ajax({
             type: "get",
             //async: false,
             async: true,
             //url: "https://api.douban.com/v2/book/search?q=javascript&count=1",
             url: "http://jira.skyguardmis1.com/browse/EI-1055",
             dataType: "jsonp",
             jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(一般默认为:callback)
             jsonpCallback:"flightHandler",//自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名，也可以写"?"，jQuery会自动为你处理数据
             success: function(json,textStatus){
                 alert(json.total);
                 alert(textStatus);
             },
             error: function(XMLHttpRequest, textStatus, errorThrown){
                 alert('fail');
                 alert(XMLHttpRequest.status);
                 if (XMLHttpRequest.status == 404) {
                	 document.getElementById("p1").innerHTML= 'P1: '  + XMLHttpRequest.status;
                 }
             }
         });
    	 */
        
        //var url1 = "http://jira.skyguardmis.com/browse/EI-10555";
    	var url1 = "get_classes.html"; 
    	var url2 = "https://api.douban.com/v2/book/search?q=javascript&count=1";
        var para1 = "a";
        var para2 = "b";
        var div1 = "p1";
        var div2 = "p2";
        alert(div1);
        $.ajax(internal_request(div1,url1,para1,para1));
        //$.ajax(cross_site_request(div1,url1,para1,para1));
        //$.ajax(cross_site_request(div2,url2,para2,para2));
        var url3 = "add_classes.html";
        var data = {ips:"192.168.7.1",ports:"100",contacts:"xiaoxie"};
        var div3 = "p3";
        //$.ajax(internal_request_post(div3,url3,data,para1));
        
     });
     function cross_site_request(id,myurl,para1,para2){
    	 return {
             type: "get",
             //async: false,
             async: true,
             url: myurl,
             //url: "http://jira.skyguardmis1.com/browse/EI-1055",
             dataType: "jsonp",
             jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(一般默认为:callback)
             jsonpCallback:"flightHandler",//自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名，也可以写"?"，jQuery会自动为你处理数据
             success: function(json,textStatus){
                 //alert(XMLHttpRequest.status);
                 alert('success state:'+textStatus);
                 if (textStatus == "success") {
                   	 document.getElementById(id).innerHTML= id + ' URL: ' + myurl + " :" + 'success' + para1 + para1;
                    }
                 return 1;
             },
             error: function(XMLHttpRequest, textStatus, errorThrown){
                 //alert('fail');
                 alert('fail http code: ' + XMLHttpRequest.status);
                 if (XMLHttpRequest.status == 404) {
                	 document.getElementById(id).innerHTML=id + ' URL: ' + myurl + " :" + XMLHttpRequest.status + para2 + para2;
                 }
                 return 0;
             },
         };
     }
     function internal_request(id,myurl,para1,para2){
    	 return {
    		 type:"GET",
    		 url: myurl,
    		 //async: false,
    		 //data:,
    		 //timeout:30000,//30秒
    		 dataType: "html",
    		 success: function(data){
                 //alert(data.status);
                 alert(data);
                 alert('success state:'+myurl);
                 //document.getElementById(id).innerHTML= id + ' URL: ' + myurl + " :" + 'success' + para1 + para1;
                 var statusimg = "../static/images/fail.png";
            	 var iconimg = "../static/images/fail.png";
            	 alert(iconimg);
            	 var data1 = {
                         name:'钓鱼网站访问',
                         urls: myurl,
                         detail:'该测试验证您是否可以访问钓鱼网站，来源于 Phishtank.com权威识别的最新钓鱼站点 ',
                         description:'待描述',
                         method: 'get',
                         };
            	 alert(data1);
            	 ///head_html = form_head_items();
            	 ///alert(head_html);
            	 //document.getElementById(id).innerHTML = head_html;
            	 ////html = add_content_item(data1,statusimg,iconimg);
            	 //document.getElementById(id).append(html);
            	 ///document.getElementById(id).innerHTML = head_html + html;
            	 result_div = document.getElementById(id);
            	 alert(result_div);
            	 head_element = form_head_element();
            	 result_div.appendChild(head_element);
            	 item_element = add_content_element(data1,statusimg,iconimg);
            	 result_div.appendChild(item_element);
            	 
                 return 1;
             },
             error: function(XMLHttpRequest){
                 //alert('fail');
                 alert('fail http code: ' + XMLHttpRequest.status);
                 if (XMLHttpRequest.status == 404) {
                	 document.getElementById(id).innerHTML=id + ' URL: ' + myurl + " :" + XMLHttpRequest.status + para2 + para2;
                 }
                 return 0;
              },
    		 
    		 
    	 };
     }
     
     function internal_request_post(id,myurl,para1,para2){
    	 return {
    		 type:"POST",
    		 url: myurl,
    		 //async: false,
    		 data: para1,
    		 //timeout:30000,//30秒
    		 dataType: "html",
    		 success: function(data){
                 //alert(data.status);
                 alert(data);
                 alert('success state:'+myurl);
                 document.getElementById(id).innerHTML= id + ' URL: ' + myurl + " :" + 'success' + para1 + para1;
                 return 1;
             },
             error: function(XMLHttpRequest){
                 //alert('fail');
                 alert('fail http code: ' + XMLHttpRequest.status);
                 if (XMLHttpRequest.status == 404) {
                	 document.getElementById(id).innerHTML=id + ' URL: ' + myurl + " :" + XMLHttpRequest.status + para2 + para2;
                 }
                 return 0;
              },
    		 
    		 
    	 };
     }
     
     function add_content_head(){
    	 var a = 1;
     }
     
     function add_content_item(data,statusimg,iconimg){
    	 //var statusimg = "../static/images/fail.png";
    	 //var iconimg = "../static/images/fail.png";
    	 var html = '<div class="row">' +
     	'<div class="col-sm-1">' +
		'<div> <img src="' + statusimg + '" style="width:15px; height:15px; margin:5px;"> </div>' +
		'</div>' +
		'<div class="col-sm-3">' +
		'<p>' + data.name + '</p>' +
		'</div>' +
		'<div class="col-sm-1">' +
		'<div> <img src="' + iconimg + '" style="width:15px; height:15px; margin:5px;"> </div> ' +
		'</div>' +
		'<div class="col-sm-6">' +
		'<p>' +  data.detail + '</p>' +
		'</div>' +
		'<div class="col-sm-1">'
		'<p> </p>' +
		'</div>' +
	    '</div>';
	    alert(html);
	    return html;
     }

     
     function form_head_items(){
     	var h = '<div class="row">' +
  		'<div class="col-sm-1"> <p> STATUS </p></div>' +
  		'<div class="col-sm-3"> <p> TEST NAME </p></div>' +
  		'<div class="col-sm-1"> <p> ICON </p></div>' +
  		'<div class="col-sm-6"> <p> TEST DETAILS </p></div>' +
  		'<div class="col-sm-1"> <p> </p></div>' +
  		'</div>';
  		return h;
     }
     function add_content_element(data,statusimg,iconimg){
 	    var row_div = document.createElement("div");
 	    row_div.setAttribute("class","row");
 	    var html = '<div class="col-sm-1">' +
 		'<div> <img src="' + statusimg + '" style="width:15px; height:15px; margin:5px;"> </div>' +
 		'</div>' +
 		'<div class="col-sm-3">' +
 		'<p>' + data.name + '</p>' +
 		'</div>' +
 		'<div class="col-sm-1">' +
 		'<div> <img src="' + iconimg + '" style="width:15px; height:15px; margin:5px;"> </div> ' +
 		'</div>' +
 		'<div class="col-sm-6">' +
 		'<p>' +  data.detail + '</p>' +
 		'</div>' +
 		'<div class="col-sm-1">'
 		'<p> </p>' +
 		'</div>';
 		row_div.innerHTML = html;
 		return row_div;
  }
  
	  function form_head_element(){
	 	var head_div = document.createElement("div");
		    head_div.setAttribute("class","row");
	 	var h = '<div class="col-sm-1"> <p> STATUS </p></div>' +
			'<div class="col-sm-3"> <p> TEST NAME </p></div>' +
			'<div class="col-sm-1"> <p> ICON </p></div>' +
			'<div class="col-sm-6"> <p> TEST DETAILS </p></div>' +
			'<div class="col-sm-1"> <p> </p></div>';
			head_div.innerHTML = h;
			return head_div;
	  }

     </script>
     </head>
  <body>
  
  <div id="p1" class="container"> </div>
  <div><p id='p4'></p></div>
  <div><p id='p2'></p></div>
  <div><p id='p3'></p></div>
  <div id="accessAll" class="container">
  <div id='div10'> </div>
  </body>
 </html>